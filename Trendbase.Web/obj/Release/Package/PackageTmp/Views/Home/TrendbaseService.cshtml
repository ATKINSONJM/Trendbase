@{
    ViewBag.Title = "Trendbase Service";
}
<h2>@ViewBag.Title</h2>


<div id="trendbaseGraph" ></div>
<script>

    //# for id, . for class in jQuery
    //$('.graphArea').
    
    $(document).ready(function () {

        var chart = c3.generate({
            bindto: '#trendbaseGraph',
            data: {
                columns: []
            },
            types: {
                res: 'line' //Change to a line graph
            }
        });

        (function poll() {
            $.ajax({
                url: "/api/Trendbase", // URL to API
                type: "GET",
                success: function (res) {
                    // Load Data into graph
                    chart.load({
                        columns: [
                            res
                        ]
                    });
                },
                contentType: "application/json; charset=utf-8",
                complete: setTimeout(function () { poll() }, 60000),
                timeout: 15000
            });
        })();
    });

    
</script>